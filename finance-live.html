<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Live World Finance Update</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#fafafa;margin:0;padding:24px}
.card{max-width:760px;margin:0 auto;background:#fff;border:1px solid #eee;border-radius:16px;padding:20px;box-shadow:0 6px 24px rgba(0,0,0,.06)}
.title{font-size:28px;margin:0 0 12px}.meta{color:#666;font-size:13px}.error{color:#c1121f}
.footer{max-width:760px;margin:12px auto;color:#666;font-size:13px}
button{padding:8px 12px;border-radius:10px;border:1px solid #ddd;background:#fff;cursor:pointer}
button:hover{background:#f6f6f6} a{text-decoration:none} a:hover{text-decoration:underline}
</style>
</head><body>
  <div class="card">
    <h1 class="title">Live World Finance Update</h1>
    <div id="content">Loading latest finance headline…</div>
  </div>
  <div class="footer">
    <span id="last">Last refreshed: — (auto every 15 min)</span>
    <button id="refresh" style="float:right">Refresh now</button>
  </div>
<script>
async function load(){
  try{
    const r=await fetch("/.netlify/functions/finance-latest",{cache:"no-store"});
    const j=await r.json(); const el=document.getElementById("content"); const last=document.getElementById("last");
    if(!j.ok){ el.innerHTML=`<p class="error">Couldn’t load news: ${j.reason||"unknown error"}</p>`; return; }
    const when=j.pubDate?new Date(j.pubDate).toLocaleString():"";
    el.innerHTML=`<article>
      <h2 style="font-size:20px;margin:0 0 6px;"><a href="${j.link}" target="_blank" rel="noopener">${j.title}</a></h2>
      ${when?`<div class="meta">${when}</div>`:""}
      ${j.description?`<p style="line-height:1.6;margin-top:10px;">${j.description}</p>`:""}
      <div class="meta" style="margin-top:10px;">Source: ${j.source}</div>
    </article>`;
